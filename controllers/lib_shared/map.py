import os
import sys
from typing import Tuple

THIS_DIR = os.path.dirname(os.path.abspath(__file__))
if THIS_DIR not in sys.path:
    sys.path.insert(0, THIS_DIR)

from .global_planner import OccupancyGrid

# SCALED FOR 7.7m x 12.8m WORLD
CELL_SIZE = 0.25
ORIGIN = (-5.5, -2.0) 

CAFETERIA_MAP = """
####################################################
#............................#####################.#
#............................#####################.#
#............................#####################.#
#..........###########.............................#
#..........###########.............................#
#..........###########.............................#
#..........###########.............................#
#..........###.....................................#
#..........###.....................................#
#..........###.....................................#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###....................##...............#
#..........###....................##...............#
#..........###....................##...............#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###..######...######...##....######.....#
#..........###....................##...............#
#..........###....................##...............#
#..........###....................##...............#
#..........#########################...............#
####################################################
"""

def get_map(cell_size: float = CELL_SIZE, 
            origin: Tuple[float, float] = ORIGIN, 
            use_test_map: bool = False) -> OccupancyGrid:
    map_string = CAFETERIA_MAP
    grid = OccupancyGrid.from_string(
        map_string=map_string,
        cell_size=cell_size,
        origin=origin
    )
    return grid

if __name__ == "__main__":
    grid = get_map()
    grid.visualise()